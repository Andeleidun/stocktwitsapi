(this.webpackJsonpstocktwits=this.webpackJsonpstocktwits||[]).push([[0],{51:function(e,t,a){e.exports=a(62)},56:function(e,t,a){},58:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),c=a.n(s),i=(a(56),a(15)),o=a.n(i),l=a(38),u=a(32),h=a(24),m=a(21),p=a(33),v=a(34),f=a(36),d=a(35),b=(a(58),a(99)),w=a(103),y=a(63),k=a(104),E=a(105),g=a(109),j=a(110),O=a(108),N=a(111),C=a(106),S=a(107),x=function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return r.a.createElement("header",{className:"app-header"},r.a.createElement(b.a,{position:"static"},r.a.createElement(w.a,{className:"title-bar"},r.a.createElement(y.a,{variant:"h1"},"StockTwits Live Feed"))))}}]),a}(r.a.Component),T=function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return r.a.createElement(k.a,{className:this.props.classGiven},r.a.createElement(E.a,null,r.a.createElement("figure",{className:"picture"},r.a.createElement("img",{src:this.props.message.user.avatar_url})),r.a.createElement(y.a,{variant:"body1",className:"namearea"},r.a.createElement("span",{className:"name"},this.props.message.user.name)," ",r.a.createElement("span",{className:"username"},"@ ",this.props.message.user.username)),r.a.createElement(y.a,{variant:"body1",className:"text"},this.props.message.body)))}}]),a}(r.a.Component),I=function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).chips=[],n.tweets=[],n.content=[],n.state={symbols:[],input:"",error:"",interval:void 0,currentCount:5,loading:!1},n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n.timer=n.timer.bind(Object(m.a)(n)),n}return Object(v.a)(a,[{key:"renderChips",value:function(e){var t,a=[],n=Object(h.a)(e);try{for(n.s();!(t=n.n()).done;){var s=t.value;s.tweets&&a.push(r.a.createElement(C.a,{badgeContent:s.tweets.length,className:"badge"},r.a.createElement(N.a,{label:s.label,className:"chip"}))),this.chips=a}}catch(c){n.e(c)}finally{n.f()}}},{key:"setTimer",value:function(){var e=setInterval(this.timer,6e4);this.setState({interval:e,currentCount:5})}},{key:"timer",value:function(){var e=this.state.currentCount-1;e>=0?this.setState({currentCount:e}):(this.submitRequest(),clearInterval(this.state.interval),this.setTimer())}},{key:"renderTweets",value:function(e){var t,a=[],n=0,s=Object(h.a)(e);try{for(s.s();!(t=s.n()).done;){var c=t.value;if(c.tweets){n++;var i,o=Object(h.a)(c.tweets);try{for(o.s();!(i=o.n()).done;){var l=i.value;a.push(r.a.createElement(T,{classGiven:"card",message:l}))}}catch(u){o.e(u)}finally{o.f()}}}}catch(u){s.e(u)}finally{s.f()}n>0&&this.setTimer(),this.tweets=a}},{key:"retrieveTweets",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n,r,s,c=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0}),"https://cors-anywhere.herokuapp.com/","https://api.stocktwits.com/api/2/streams/symbol/",".json",a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{headers:{}};return fetch(e,Object(l.a)({},t,{headers:Object(l.a)({},t.headers,{"X-Requested-With":"stock-twits-live-feed"})})).then((function(e){return e.json()})).catch((function(e){return c.setState({error:e})}))},n=Object(h.a)(t),e.prev=6,s=o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=r.value).url="https://api.stocktwits.com/api/2/streams/symbol/".concat(t.label).concat(".json"),n="https://cors-anywhere.herokuapp.com/".concat(t.url),e.next=5,a(n).then((function(e){t.tweets=e.messages})).catch((function(e){return c.setState({error:e})}));case 5:case"end":return e.stop()}}),e)})),n.s();case 9:if((r=n.n()).done){e.next=13;break}return e.delegateYield(s(),"t0",11);case 11:e.next=9;break;case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(6),n.e(e.t1);case 18:return e.prev=18,n.f(),e.finish(18);case 21:return this.state.error||(this.renderChips(t),this.renderTweets(t)),this.setState({loading:!1}),e.abrupt("return",t);case 24:case"end":return e.stop()}}),e,this,[[6,15,18,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"submitRequest",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,a,n,r,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.input.toUpperCase().replace(/\s+/g,"").split(","),a=[],n=0,r=Object(h.a)(t);try{for(r.s();!(s=r.n()).done;)c=s.value,a.push({key:n,label:c,tweets:0}),n++}catch(i){r.e(i)}finally{r.f()}return e.next=7,this.retrieveTweets(a);case 7:a=e.sent,this.setState({symbols:a});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState({input:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.submitRequest(),t.preventDefault();case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?this.content=r.a.createElement(S.a,null):this.state.error?this.content=r.a.createElement("p",null,this.state.error):this.content=r.a.createElement("section",{className:"content"},r.a.createElement("section",{className:"chips"},this.chips),r.a.createElement("section",{className:"tweets"},this.tweets)),r.a.createElement("div",{className:"App"},r.a.createElement(x,null),r.a.createElement("main",{className:"app-main"},r.a.createElement("section",{className:"search"},r.a.createElement("form",null,r.a.createElement(j.a,{className:"stock-input",id:"stock-symbols",label:"Input stock symbols (separate with a comma)",value:this.state.input,onChange:this.handleChange,InputProps:{startAdornment:r.a.createElement(O.a,{position:"start"},"$")}}),r.a.createElement("br",null),r.a.createElement(g.a,{className:"search-button",variant:"contained",onClick:this.handleSubmit},"Search"))),this.content))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[51,1,2]]]);
//# sourceMappingURL=main.49e1872c.chunk.js.map